{% extends "page.html" %}

{% load i18n %}
{% load static %}

{% block extra_head %}
    {{ block.super }}
{% endblock extra_head%}

{% block nav_menu %}
  <li><a href="/">{% trans "Main page" %}</a></li>
  <li><a href="#modify">{% trans "Modify" %}</a></li>
  <li><a href="#data">{% trans "Attributes" %}</a></li>
  <li><a href="#password">{% trans "Change Password" %}</a></li>
  {% if request.user.is_superadministrator or request.user.is_staff %}
        <li><a href="{% url 'admin:index' %}">{% trans "Admin" %}</a></li>
  {% endif %}
  <li><a class="item" href="{% url 'provisioning:provisioning_logout' %}?next={{ request.path }}">
        {% trans "Logout / Esci" %}
      </a>
  </li>
{% endblock nav_menu %}

{% block page_content %}
<!-- contact section -->
<section id="modify" class="section intro ">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2 conForm ui form">
        <h5>{% trans "Identity Management System" %}</h5>
        <h2>{% trans "Welcome " %} {{ lu.uid }}</h2>
        <p>{% trans "Here you can modify your profile" %}</p>
        <div id="message">
            {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                <li{% if message.tags %} class="ui {{ message.tags }} message"{% endif %}>
                    {{ message }}
            </li>
            {% endfor %}
            </ul>
            {% endif %}
        </div>
        <form method="post" action="{% url 'provisioning:change_deliveries' %}" name="cform" class="idm_form">
          {% csrf_token %}
          <table style="width: 100%;">
              <tbody>
                {{ form_delivery }}
              </tbody>
          </table>

            <div class="html ui top attached segment">
                <div class="ui top attached label">{% trans "Options" %}</div>
                <div class="ui toggle checkbox">
                  {{ form_profile.access_notification.errors }}
                  {{ form_profile.access_notification }}
                  {{ form_profile.access_notification.label_tag }}
                </div>
            </div>

          <input type="submit" id="submit_delivery" name="send" class="submitBnt btn btn-large" value="{% trans 'Save' %}">
          <div id="simple-msg"></div>
        </form>
      </div>
    </div>
  </div>
</section>
<!-- contact section -->

<!-- contact section -->
<section id="data" class="section ">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2 conForm ui form table-responsive">
        <h2>{% trans "Attributes" %}</h2>
        <p>{% trans "These would be also used as permissions and roles in third party web services." %}</p>
          <table class="ui very basic collapsing celled table"
                 style="width: 100%; background: white; padding: 13px;">
              <thead>
                  <tr>
                    <th>{% trans "Attribute name" %}</th>
                    <th>{% trans "Value" %}</th>
                  </tr>
              </thead>
              <tbody>
                {% for attr,value in attrs.items %}
                      <tr>
                        <td>{{ attr }}</td>
                        <td>{{ value|safe }}</td>
                      </tr>
                {% endfor %}
              </tbody>
          </table>
          <div id="simple-msg"></div>
      </div>
    </div>
  </div>
</section>
<!-- contact section -->

<!-- contact section -->
<section id="password" class="section intro">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2 conForm ui form">
        <h2>{% trans "Renew your Password" %}</h2>
        <p>{% trans "A confirmation email will be also sent." %}</p>
        <div id="message">
        {% for msg in messages %}
            <li>{{ msg }}</li>
        {% endfor %}
        </div>
        <form method="post" action="{% url 'provisioning:change_password' %}" name="cform" class="idm_form">
          {% csrf_token %}
          <table >
            {{ form_password }}
          </table>
          <input type="submit" id="submit_password" name="send" class="submitBnt btn btn-large" value="{% trans 'Save' %}">
          <div id="simple-msg"></div>
        </form>
      </div>
    </div>
  </div>
</section>
<!-- contact section -->
{% endblock page_content %}
