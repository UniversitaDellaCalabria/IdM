import re
import requests

USERNAME = 'thatusername'
PASSWORD = 'thatpassword'
SEARCH_URL = 'https://idm.unical.it/gestione/ldap_peoples/ldapacademiauser/?q=&custom_search=sn%2Cfilter%2Cexact%2C{}'
AUTH_URL = 'https://idm.unical.it/gestione/login/'
SNS = "DIMA ALOE AMBROSIO AMMENDOLEA AMORUSO AMELIO VELLONE AUSILIO CAMPANA ARIETA AVENA VALENTI BATTISTA TURANO TRIPICCHIO BERNARDO TRAVINO TRAPASSO BRESCIA BRUNO BULZOMI' CALLIPO CINELLI CAPALBO CAPARELLI SPINELLI SIRIANNI CONESTABILE CONFORTI CARUSO DE CAVALERI SESTITO SCODITTI FACENTE SCARCELLI GATTO GOMEZ GONNELLI IMPIERI LORICCHIO MULTARI NESCI CHIANELLI CHINDAMO CHIRILLO CIAMPA CLEMENO CORIALE RONDINELLA ROMANO D'AMICO D'ANGELO RISOLI RENDE PRICOLI DE DONNICI FRASCA' PELUSO FERRINDA FILANDRO NASSO NARDO MURIALE GAGLIARDI MORETTI GALATI SCIGLIANO GALLUCCIO TASSONE GIRIMONTE MAZZUCA MAZZEO MAZZA VIOLA MARTINO MALITO MALETTA LOPEZ LOPRETE LOSSO MAGARO' FALBO NAIMO BARTELLA CONIGLIO PARENTELA LO BARILE CARIATI CASACCHIA GIRALDI SOTTILOTTA MAZZOTTA NOTO BIA ROMANO LEOTTA LAURENDI STILLO ANELLI CAFARO LA FUNARO CARBONE BOVA CIMINO DICHIERA DE MARINGOLA KORTA LOIACONO SOMMARIO STILLISANO SURACE TALARICO TURSI MARCHIO AMENDOLA SANTORO TOMASELLI CONTARTESE CUCUNATO BONORA MOLINO CHIANELLI DE CAPIZZANO COLTELLARO GALLUZZI MARINO MUNGO PALERMO PANZERA PISANO RAIMONDO RASO ROCCA MADEO FERRARI ARGENTO BAFFA CANNAVACCIUOLO CANONICO CRUPI GALLO IMBROGNO LUFRANO MACCHIONE SCHIAVELLO SOCCORSO VATICANO CATAPANO PLASTINA CRUSCO VIRELLI IAQUINTA MASSIMILLA AMERISE RIZZUTO NOCERA CIRELLI COSCHIGNANO FALSETTI CORNO GUALTIERI MURRONE ARGIRO' SPIZZIRRI COSTANTE CHIARAMONTE DEMME IERARDI FRAPPA LOMONACO FIORINO FERACO PASQUALINO GAUDIO OPPEDISANO LA DIURNO MELE MAURO BOMPAROLA CRUDO COSTANZO SPANO' MARTIRE BONOFIGLIO SCHIFINI MOLINARO LUZZI BONIFATI MESIANO TORCHIARO MANARITI SPADAFORA ZITO CIMINO GIULIANO CURCIO TOTINO RIAD BRUNETTO DONATO RAIMONDO VERNIOLI NADURAK GUAGLIANONE TETI ANGOTTI FRANCO FUDA SICILIA LAVIA D'ANGELO CANINO ABATE CRUDO SILLETTA GRANATO MURACA MUSTACCHIO INGLESE PAOLILLO GUAGLIARDI CALCOPIETRO ALTOMARE MARINO' CERASO CAMMARA' DE NICOLETTI MONTUORO FERACO CUPO DE MOLINARO IONA' GNISCI DI GIGLIOTTI PANTO' MANGOGNA SCRUCI MARTINO PATITUCCI MARTINO SCIGLIANO CICCONE MARTINO MASAPOLLO DI GUGLIELMO LUCI CARIATI GHARIOUI SANTORO ROSSI CIOBANU SCARPATI RIZZO PERRI CERAVOLO MALERBA ANANIA LAZZARO IAQUINTA LAMOREA CONFORTI RASO GENTILE BRUNO LAVORATO PIGNANELLI STRAFACE PEDACE FALCONE MOTTA PRONESTI' LENTINI SANTO POTRINO TRAPASSO COLELLI MASTROIANNI CARIO LUZZI MASTRIA PERRI MAZZEI ZACCARO CARLOMAGNO LABANCA SERRAVALLE PIZZARELLO CAPRISTO STOIA TEDESCO FUDA DE CAPARELLI GALLO LAMBERTI GIGLIOTTI SULLA CORIGLIANO CAIRO DONATO LEONETTI LANTERI MARRELLO GALLO RAGUSA MERCURI DE IANNELLO CELEBRE ARCURI MAMIANI MINERVINI CRISAFULLI SAFFIOTI RIZZUTO ALESSIO CAPRARO DUARDO SERPA NICOLETTI ALOISIO GARGIULLO AGOSTINO SESTITO BONO BENINCASA DEMORO MAZZEI DE CHIARAVALLOTI AMORUSO ZITO GRECO ALVARO LE VALLONE NAPOLI RAIMONDO VILLELLA NICOLAZZO CRISTOFARO CARDAMONE CAMMERATA MULLACE PUZDRANOVSKA VINCENZI VITOLA IACONIS GIORDANO BARRECA PULITANO CARUSO IEMMA SPINA CRISTALDI CORRADO RENDA TODARO MIRANTE GENA MARCHIANO' IORIO IRIANNI MASCHIO PUGLIESE CIRIANNI VULCANO LAPIETRA DE FUSARO PUGLIESI MIRABELLI SCARFONE BURGO SOMMARIO LAINO PROIETTO FURIATO BIANCO LATASSA RAMUNDO PERNA ELIA SBARRA VIRGARA CAUTERUCCI REDA AMBROSINI ANELLO MIGALE SESSA BERARDI CERAVOLO DE PALMIERI MACRI LA ZACCARO GATTO RUFFO CURCIO BRANCACCIO FRAU ARDUCA CONDOLEO CELIA PIRRITANO NOTARO CHIERA LUZZI CONFORTI CHIAPPETTA AVERSA DE BERARDI CICCARELLI LIMARDO GUZZI FRASALI SACCO FUMO BARDELLINI MAZZEO ALBANESE BROGNO ELIA FILICE TOSCANO CONFORTI ALBANESE TERRAZZANO PERRONE LONGOBUCCO PISANI LAROTONDA MARIGLIANO MARUCA GIMELLI BOVA TROPEANO MOLINARO RODINO' GAITA MANTUANO RIZZUTO TOMAINO ARCURI DE MANDAGLIO MUTO DE LIBRANDI VIVACQUA RUSSO CANADE' BRAGANO' CALIGIURI MILIZIA CASTAGNINO LAGANA' BRUNO CAMPAGNA TALARICO FERRARO EMANUELE NESCI MAMMONE COSENTINO VERARDI TRUNZO PONZANO CARUSO PULLANO PASCERI LESCI SCORNAVACCA CORIGLIANO MASTROPAOLO CAPUTO SERVELLO ROMANO MANCUSO FIORENTINO CUDA CEDRO TOLISANO SALVATO CORTESE FORLINO MELITI PACE CIDDIO MITTICA MANCUSO CORSO ALTOMARE LAMENZA DI BEVACQUA DE CAMPAGNA ESPOSITO FORTE CERMINARA ZERBO QUIRINO GRECO COLOCA LIPODIO DE FILARDO LABATE CAMPO DE STALTARI PIRAGINE MARRAZZO DE SCIAMMARELLA MAZZITELLI MIRENDA BELLINO LAINA' RODINO' DE TETI DE SPEZIALE MIGNOLO ILINA GUIDO PRATTICO' GALLO SANSONE CANINO PETRASSI FUOCO MAIURANO CORACE ASCENTE TAVERNA MAZZIOTTI CARELLI SCARCELLI SALVO ROMA RAGO COFONE VONO RUFFA VERALDI PANZERA PERRONE LENTI MIRENZIO PERRI BITONTI FLORIO FALVO MANDAGLIO BONOFIGLIO BENVENUTO SABRI FIORE TROTTA TOLISANO SACCO GALLO DONATO AIELLO CAPANO DONATO MASI MAURO CHIEFALO MIRABELLI SOTTILE CARBONE CAPUTO DEL PIRILLO PATERNO FORESTIERO GRECO AMATO FOLINO ALOISIO POLITANO' LA LUCENTE PANZINO FIORENTINO LOVOI ROMANO VENTURINO RUSSO REDA PECORA PIRILLO SCIAMMARELLA TOTEDA BOZZO NICOTERA PELLEGRINO ITALIANO MIGLIACCIO DRAGO NIGRO GALLO DE CORTESE MARINO BUONOCORE RAGADALI BRUNO GORIZIA ADIMARI FRANGELLA SILIPO MIRABELLI COSTA MARCHIO PALMIERI MITIDIERI BERARDI RUINA PEDACE PACE AIELLO VENTURA SANZONE CARUSO TALOTTA MICELI BASTA FALDUTO GIGLIO MEGNA CHIAPPALONE FAMMARTINO MALAGRINO' COMITO SUPPA PUGLIESE ALESSIO PALMIERI LOMBARDI CAPANO LIRANGI MAZZA RUBINETTO NIRTA CAVALLO LOIACONO CALZONE GIUDICE INFUSINO STRAMANDINOLI FRANCO NEVIGATO DI CALLIPARI TROFIMOV VACCARO TOTEDA GIOFRE' FLORIO CAMPOSANO ROMANO PINGITORE POSTERARO MURDOCCA RIZZUTO BONOFIGLIO VICECONTE VIOLA TRIVIERI SCACCIA COLOCA MUGLIA D'AMICO MANELI DEMAIO RICCA POVOLEDO AMICO BARATTA FIORENTINO COLACE MASTROIANNI TRIPODI BARLETTA ROMEO CARRAVETTA PINACCHIO BALDO TASSONE RIZZO PREZIOSO CIPOLLA ELIA EPIFANI ROTTURA MAZZULLA TAFARO DE FAZIO GRECO CRISTARELLA MAGARO' SINOPOLI QUINTIERI MENDICINO GEDEONE CAVALLO ZAMPETTA DI FEDERICO SANTORO TERRANOVA SERAFINI SERAFINI ANDRIYCHUK MAZZONE RAMUNDO RAIMONDO MURGIA FABIANO IACONIS CITTADINO CAMPANARO INFUSINO VUONO MIRABELLI COZZOLINO BITONTI DI PISANI PROTOMARTIRE PACE MANTUANO SORBARA DE FRONTERA MUGLIA BRASACCHIO MAZZA D'ANGELO ESPOSITO PALDINO CAPUTO RESTUCCIA DE PARISE FOLINO ZACCONE BAHRIY CRISTIANO VITA CUCONATI DE AMARITI MINNITI ALTIMARI DE BONINI PASTORE CARAVELLI ELIA CUTULI CORBELLI AMBRESE SICILIANO MACRI' SAVAGLIA TERRANOVA CIMA VILLI' COCCIMIGLIO SINGH MARTILOTTA MAZZOTTA MALTA DE BELLUCCI CORIGLIANO CHIAPPETTA FILICE CRUCITTI TALCO CULLARI SALERNO CURIA STORNIOLO PACE GALATI DE PORCO BOSCARELLI CARNEVALE PANEBIANCO PASCUZZO RIOLO RUNCO BONACCI CANONACO SPAGNA TORDIQUINTO CARLINO PERRI AIELLO DATTILO SORRENTO STAROPOLI MANGANO CARVELLI POERIO FITTANTE FUSARO MORABITO MANCUSO COSENZA DE MORELLI COMITO LUCIA FALSETTI SCHIAVELLI SCHIAVELLO MARRA TRIPODI GURNARI DE SPEZZANO ROMANO LETTIERI SCIARROTTA SARAVO MARINO STACCUNEDDU DANIELE GRANDINETTI MAIOLINO SPINA CRETELLA CONDOLUCI BASTA MOLINARO FERRARI CUNSOLO DOKA PERLONGO NICOLETTI COFONE CRISTIANO MALTESE MARTIRE RAGO PETRACCA ET-TIBI FIDA DI SCIGLIANO DOMANICO LONGO GUALTIERI AGOSTO FAORLIN PENNAZIO RANZI ABATE CHIARELLO CHIARELLO FEMIA FORCINITI GIANNUZZI GIANNUZZI GUERRA GUGLIELMELLI IACONETTI MADEO MONTONE OTRANTO ROSARNO SCANDALE SILIPO SEGRETO CARUSO MIGLIO CORICA SUPPA MAIOLO FRANZE' PANTUSA DE MAZZUCA PUGLIESE LAGANA' ADORNO STEFANI LICASTRO SERGI IANNONE MORABITO NIGRELLI DIGREGORIO MOUSSA DE LOMBARDO GELSOMINO CAPALBO CAMBIALE VECCHIO RENDE COCCIOLO MAZZOTTA CORICELLO STILLO SERRAO CURCIO LO FILICETTI STELITANO PIVETTA LUPO CIPRIANI MONTEMURRO LEDONNE BONOFIGLIO IZZO CUCCI PIZZIMENTI SPADAFORA FOGLIA GIORDANO FORTE CIULLO COSCARELLA MORELLI PANDULLO PUCCI ZUCCO SOLURI SICILIA VELTRI CERAOLO CHIERCHIA SERVIDIO BRUZZESE MAZZOTTI RIZZO CATONE SPADOLA CAVALIERE RULLO SCURO LICATA QUARETTA SANARICO SANGINETO ABOUEISH BRUNO FALBO DE RUNCO CATERA BELLUSO MUSCIA BRUNETTI COZZA GALLUCCIO GAETANI QUARTUCCI BRUNO ARMANI CONCOLINO CERCHIARA FEZZA OLIVA MONTEALVO NICOLETTA DEMOFONTI SPERANZA SARUBBI CIRONE AGOSTO DI GALLUCCIO NISTICO' RICCI CASTIGLIONE FAZZO MAIDA SCARMOZZINO MACRI' COSTANTINO POLITANO FALCO GALLO VINCI RUFFOLO RENDE ACRI NARDI GIORNO POLICASTRO PANSERA SERGI ALESINA PERNA BRUNO CHIODO MARRA RIZZO CISTARO COSENTINO LEVATO SAPIA ACETO ALFANO COCERIO DE DE FALBO GALLO"

client = requests.Session()
req = client.get(AUTH_URL)

token = re.findall(b'name="csrfmiddlewaretoken" value="([a-z0-9]*)"', req.content, re.I)[0]

req = client.post(AUTH_URL, dict(csrfmiddlewaretoken = token,
                                 username = USERNAME,
                                 password = PASSWORD))

for i in SNS.split(' '):
    req = client.get(SEARCH_URL.format(i))
    print('Got {}: {}'.format(i, req.status_code))
